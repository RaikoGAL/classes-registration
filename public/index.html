<!doctype html>
<html lang="he">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>מערכת חוגים — ראשון לציון</title>
  <style>
html{direction:rtl}*{box-sizing:border-box}body{margin:0;padding:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,"Noto Sans Hebrew","Rubik",sans-serif;background:#0b0d12;color:#e6e8ee}
a{color:#a4c2ff;text-decoration:none}.container{max-width:1200px;margin:0 auto;padding:24px}
.header{display:flex;justify-content:space-between;align-items:center;gap:16px;flex-wrap:wrap}.logo{font-weight:800;letter-spacing:.3px}
.header .actions{display:flex;gap:10px;flex-wrap:wrap}.header .actions a,.btn{display:inline-block;padding:12px 18px;border-radius:14px;border:1px solid #2a3246;background:#121826;color:#e6e8ee;transition:all .2s;font-size:16px}
h1,h2,h3{margin:16px 0 8px}.subtle{color:#9aa4b2;font-size:14px}
.card{background:linear-gradient(180deg,#0f1422,#0b0f1a);border:1px solid #253048;border-radius:18px;padding:16px;display:flex;flex-direction:column;min-height:220px}
.grid{display:grid;gap:16px}.grid.timetable{grid-template-columns:repeat(3,1fr)}
.kv{display:flex;flex-wrap:wrap;gap:8px 10px;font-size:14px;color:#cbd5e1}.badge{font-size:12px;padding:4px 8px;background:#12233d;border:1px solid #2a4778;border-radius:999px;color:#cfe1ff}
.sessions{margin:8px 0;display:flex;flex-wrap:wrap;gap:6px}.session{font-size:12px;padding:4px 8px;border-radius:999px;background:#132236;border:1px dashed #2a4778}
.cta{margin-top:auto;display:flex;justify-content:space-between;align-items:center;gap:12px}.price{font-size:14px;color:#cbd5e1}.btn.primary{background:#1a3a8a;border-color:#3154a5}
.toolbar{display:flex;gap:12px;align-items:flex-end;margin:12px 0 20px;flex-wrap:wrap}label{font-size:15px;color:#cbd5e1;display:block}
select,input,textarea{width:260px;padding:12px 14px;border-radius:14px;border:1px solid #2c3448;background:#0e1422;color:#e6e8ee;font-size:16px}
select.wide{width:320px}.form{display:grid;grid-template-columns:repeat(2,1fr);gap:14px}.form .full{grid-column:1/-1}
.footer{margin-top:32px;color:#97a3b6;font-size:13px;text-align:center}.gate{display:grid;gap:12px;place-items:center;padding:48px 16px}
.tel{font-size:28px;display:block;margin:6px 0}.ltr{direction:ltr;unicode-bidi:bidi-override}
@media (max-width:980px){.grid.timetable{grid-template-columns:repeat(2,1fr)}}
@media (max-width:640px){.grid.timetable{grid-template-columns:1fr}}
@media (max-width:540px){.container{padding:16px}h1{font-size:1.6rem}.toolbar{flex-direction:column;align-items:stretch}select,input,textarea,select.wide{width:100%}.cta{flex-direction:column;align-items:stretch}.btn.primary{width:100%;text-align:center}.card{min-height:180px}}
</style>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="page-register light">
<div class="container"><div class="header"><div class="logo">מועדון השחמט ראשון לציון</div><div class="actions"><a href="admin.html">אדמין</a><a class="ghost" href="contact.html">צור קשר</a></div></div><h1>מערכת חוגים — הרשמה בלחיצה</h1><div class="subtle">בחרו יום/מאמן/רמה ולחצו על "להרשמה"</div><div class="toolbar"><label>יום
<select id="daySelect" class="wide"><option value="all">כל הימים</option><option value="0">א'</option><option value="1">ב'</option><option value="2">ג'</option><option value="3">ד'</option><option value="4">ה'</option><option value="5">ו'</option><option value="6">ש'</option></select></label><label>רמה
<select id="levelSelect" class="wide"><option value="all">כל הרמות</option><option value="גן–א׳">גן–א׳</option><option value="בנות">בנות</option><option value="1200">1200–1400</option><option value="1400">1400–1600</option><option value="1600">1600–1800</option><option value="מבוגרים">מבוגרים</option><option value="+1900">+1900</option></select></label><label>מאמן/ת
<select id="coachSelect" class="wide"><option value="all">כל המאמנים</option></select></label></div><div id="grid" class="grid timetable"></div><div class="footer">© 2025 מועדון השחמט ראשון לציון — דמו ויזואלי לצורכי אפיון</div></div><script defer src="script.js"></script>
<script>
(function(){
  // הודעת יצירת קשר אחרי ההדר
  function insertNotice(){
    const container = document.querySelector('.container');
    if (!container || document.getElementById('contactNotice')) return;
    const header = container.querySelector('.header');
    const div = document.createElement('div');
    div.id = 'contactNotice';
    div.className = 'notice';
    div.innerHTML = 'עדיף לפנות בהודעת ווטסאפ או במייל <a href="mailto:rishonchess@gmail.com">rishonchess@gmail.com</a>';
    (header && header.nextSibling)
      ? header.parentNode.insertBefore(div, header.nextSibling)
      : container.prepend(div);
  }

  // שיפור כרטיס בודד: מחיר מפוצל + "מד כושר" בטווחים מספריים
  function enhanceCard(card){
    // 1) מחיר: "235/355" -> תגיות "מחיר ליום אחד" + "מחיר ליומיים"
    const cta = card.querySelector('.cta');
    if (cta && !cta.dataset.priceEnhanced){
      const priceEl = Array.from(cta.children).find(el => /\d/.test(el.textContent || ''));
      if (priceEl){
        const raw = priceEl.textContent.trim();
        const m = raw.match(/^(\d{2,5})\s*\/\s*(\d{2,5})$/);
        if (m){
          const [, one, two] = m;
          priceEl.innerHTML = `<span class="price-lines">
            <span class="price-tag">מחיר ליום אחד: ${one} ₪</span>
            <span class="price-tag">מחיר ליומיים: ${two} ₪</span>
          </span>`;
          cta.dataset.priceEnhanced = '1';
        }
      }
    }
    // 2) הוספת "(מד כושר)" ליד טווחים כמו "1200-1400"
    card.querySelectorAll('*').forEach(el=>{
      if (el.children.length===0) {
        const t = (el.textContent||'').trim();
        if (/\b\d{3,4}\s*-\s*\d{3,4}\b/.test(t) && !/מד כושר/.test(t)) {
          el.textContent = t + ' (מד כושר)';
        }
      }
    });
  }

  // הפעלה על כל הכרטיסים, גם כאשר נטענים דינמית
  function setupObserver(){
    const grid = document.getElementById('grid') || document.querySelector('.grid.timetable');
    if (!grid) return;
    grid.querySelectorAll('.card').forEach(enhanceCard);
    const obs = new MutationObserver(muts=>{
      muts.forEach(m=>{
        m.addedNodes.forEach(n=>{
          if (n.nodeType===1 && n.classList.contains('card')) enhanceCard(n);
          if (n.nodeType===1) n.querySelectorAll?.('.card').forEach(enhanceCard);
        });
      });
    });
    obs.observe(grid, {childList:true, subtree:true});
  }

  insertNotice();
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', setupObserver);
  } else {
    setupObserver();
  }
})();
</script>
<script>
(function(){
  // נקה את ההודעה אם קיימת (ביקשת להסיר)
  const old = document.getElementById('contactNotice');
  if (old) old.remove();

  // פונקציה שמוסיפה תגיות מחיר ומחילה "מד כושר" על טווחים מספריים
  function enhanceCard(card){
    // 1) מצא את שורת התגיות העליונה
    const kv = card.querySelector('.kv') || card.querySelector('.tags') || card.querySelector('.meta');
    // 2) מצא טקסט מחיר בסגנון ₪355/₪235 או 355/235₪
    const priceNode = Array.from(card.querySelectorAll('*')).find(n => {
      if (!n || n.children?.length) return false;
      const t = (n.textContent||'').replace(/\s+/g,'');
      return /₪?\d{2,5}\/₪?\d{2,5}₪?/.test(t);
    });

    if (priceNode){
      const t = priceNode.textContent.replace(/\s+/g,'');
      const m = t.match(/₪?(\d{2,5})\/₪?(\d{2,5})/);
      if (m){
        const big = Math.max(+m[1], +m[2]), small = Math.min(+m[1], +m[2]);
        // עדכנו שורת המחיר התחתונה לכיתוב ברור
        priceNode.textContent = `יום אחד: ₪${small} • יומיים: ₪${big}`;

        // הוסף גם תגיות מחיר למעלה (אם יש kv)
        if (kv){
          const p1 = document.createElement('span');
          p1.className = 'price-badge';
          p1.textContent = `יום אחד: ₪${small}`;
          const p2 = document.createElement('span');
          p2.className = 'price-badge';
          p2.textContent = `יומיים: ₪${big}`;
          kv.appendChild(p1);
          kv.appendChild(p2);
        }
      }
    }

    // 3) “מד כושר” ליד טווחים (למשל 1200–1400)
    const rangeRe = /\b\d{3,4}\s*[-–]\s*\d{3,4}\b/;
    (kv || card).querySelectorAll('span,div,em,strong').forEach(el=>{
      if (!el || el.children?.length) return;
      const txt = (el.textContent||'').trim();
      if (rangeRe.test(txt) && !/מד\s*כושר/.test(txt)){
        el.textContent = `מד כושר: ${txt}`;
        el.classList?.add('tag'); // יקבל סטייל של תגית אם kv קיים
      }
    });
  }

  // הפעלה על כל הכרטיסים + האזנה לטעינה דינמית
  function run(){
    const grid = document.getElementById('grid') || document.querySelector('.grid.timetable');
    if (!grid) return;
    grid.querySelectorAll('.card').forEach(enhanceCard);
    const mo = new MutationObserver(muts=>{
      muts.forEach(m=>{
        m.addedNodes.forEach(n=>{
          if (n.nodeType===1 && n.classList?.contains('card')) enhanceCard(n);
          n.querySelectorAll?.('.card')?.forEach(enhanceCard);
        });
      });
    });
    mo.observe(grid,{childList:true,subtree:true});
  }

  if (document.readyState==='loading') document.addEventListener('DOMContentLoaded', run);
  else run();
})();
</script>


</body>
</html>
